# Telegram Habit Tracker Bot

Телеграм бот для трекинга привычек с автоматическими напоминаниями.

## Возможности

- **Управление привычками** — добавление, удаление, отметка выполнения
- **Гибкая частота** — ежедневные привычки или раз в N дней
- **Автоматические напоминания**:
  - Утром — список привычек на сегодня
  - Вечером — чек-лист для отметки выполненных
- **Статистика** — streak'и, процент выполнения, прогресс

## Быстрый старт

### 1. Получи токен бота

1. Открой [@BotFather](https://t.me/BotFather) в Telegram
2. Отправь `/newbot`
3. Следуй инструкциям и получи токен

### 2. Установи зависимости

```bash
npm install
```

### 3. Настрой окружение

```bash
# Скопируй пример конфига
cp .env.example .env

# Открой .env и вставь свой токен
# BOT_TOKEN=123456:ABC-DEF...
```

### 4. Создай базу данных

```bash
# Генерирует Prisma клиент и создаёт БД
npm run db:generate
npm run db:push
```

### 5. Запусти бота

```bash
# Режим разработки (с hot reload)
npm run dev

# Или production
npm run build
npm start
```

## Команды бота

| Команда | Описание |
|---------|----------|
| `/start` | Главное меню |
| `/habits` | Список привычек |
| `/stats` | Статистика |
| `/settings` | Настройки напоминаний |
| `/help` | Справка |

## Структура проекта

```
src/
├── bot/
│   ├── index.ts           # Инициализация бота
│   ├── commands/          # Обработчики команд
│   ├── callbacks/         # Обработчики inline кнопок
│   ├── conversations/     # Диалоги (добавление привычки)
│   └── keyboards/         # Inline клавиатуры
├── db/
│   └── index.ts           # Подключение к БД
├── services/
│   ├── userService.ts     # Работа с пользователями
│   ├── habitService.ts    # Работа с привычками
│   ├── statsService.ts    # Статистика
│   └── reminderService.ts # Отправка напоминаний
├── scheduler/
│   └── cron.ts            # Планировщик напоминаний
├── types/
│   └── index.ts           # TypeScript типы
├── utils/
│   ├── date.ts            # Утилиты для дат
│   └── callback.ts        # Работа с callback data
└── index.ts               # Точка входа
```

## Технологии

- **Runtime**: Node.js + TypeScript
- **Telegram API**: grammY
- **База данных**: SQLite + Prisma ORM
- **Планировщик**: node-cron

## Скрипты

```bash
npm run dev        # Запуск в режиме разработки
npm run build      # Сборка проекта
npm start          # Запуск production сборки
npm run db:generate # Генерация Prisma клиента
npm run db:push    # Применение схемы к БД
npm run db:studio  # Открыть Prisma Studio (GUI для БД)
```

## Настройка напоминаний

По умолчанию:
- Утреннее напоминание: 08:00
- Вечернее напоминание: 21:00
- Часовой пояс: UTC+3 (Москва)

Всё это можно изменить в настройках бота (`/settings`).

## FAQ

**Q: Как изменить часовой пояс?**  
A: Пока что часовой пояс по умолчанию UTC+3. В будущих версиях будет возможность настройки.

**Q: Куда сохраняются данные?**  
A: В файл `database.db` рядом с проектом (SQLite).

**Q: Как сделать бэкап?**  
A: Просто скопируй файл `database.db`.

## Лицензия

MIT
